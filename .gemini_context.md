# Y-Data-House Gemini CLI 컨텍스트 파일

## 현재 AI 통합 상태 요약

### 1. 기존 AI 시스템 (보존 필요)
- **DeepSeek API**: 주력 AI 엔진 (rag.py)
- **OpenAI API**: 임베딩 생성 전용 (embed.py)
- **ChromaDB**: 벡터 데이터베이스 (채널별 격리)

### 2. Gemini CLI 역할 정의
- **개발 보조 도구**로 활용
- 기존 AI 시스템 대체하지 않음
- 코드 리뷰, 버그 분석, 문서화 지원

## 중요 호환성 지침

### 1. 기존 시스템 보존
```python
# 기존 DeepSeek 통합 (vault/90_indices/rag.py) - 수정 금지
client = OpenAI(
    api_key=self.api_key,
    base_url="https://api.deepseek.com"
)

# 기존 OpenAI 임베딩 (vault/90_indices/embed.py) - 수정 금지  
client = OpenAI()
response = client.embeddings.create(
    model="text-embedding-3-small",
    input=text
)
```

### 2. 환경 변수 충돌 방지
```bash
# 기존 환경 변수 (유지)
DEEPSEEK_API_KEY="primary_ai_key"
OPENAI_API_KEY="embedding_key"

# Gemini 관련 (추가 가능)
GEMINI_API_KEY="development_assistant_key"
```

### 3. 설정 파일 분리
- **기존**: `~/.ydh.toml` (프로덕션 설정)
- **Gemini**: `.gemini.toml` (개발 도구 설정)

## 개발 워크플로우에서의 Gemini 활용

### 1. 코드 리뷰 시나리오
```bash
# 새로운 기능 개발 후
gemini review src/ydh/downloader.py --context="YouTube 다운로더 최적화"

# 버그 수정 후
gemini analyze logs/downloader.log --issue="다운로드 실패 분석"
```

### 2. 아키텍처 개선 제안
```bash
# 전체 시스템 분석
gemini analyze --architecture --focus="RAG 시스템 최적화"

# 특정 모듈 개선
gemini suggest vault/90_indices/rag.py --improvement="검색 성능 향상"
```

### 3. 문서화 지원
```bash
# API 문서 자동 생성
gemini document src/ydh/cli.py --format="markdown"

# 코드 주석 추가
gemini comment src/ydh/downloader.py --language="korean"
```

## 프로젝트 특성 반영

### 1. 언어 정책
- **설명/주석**: 한글 필수
- **코드**: 영어 유지
- **로그/에러**: 한글 표시

### 2. 기술 스택 이해
- **Python**: 패키지 구조 (src/ydh/)
- **Rust**: Tauri 백엔드 (app/src-tauri/)
- **TypeScript**: React 프론트엔드 (app/src/)

### 3. 제약 사항
- **YouTube ToS 준수**: 개인 사용 목적
- **로컬 저장**: 클라우드 업로드 금지
- **Rate Limiting**: 적절한 요청 제한

## 테스트 및 품질 보증

### 1. 기존 테스트 시스템 활용
```bash
# 환경 테스트
python test_env.py

# 기능 테스트
python test_channel.py
python test_chunk_downloader.py
```

### 2. Gemini 지원 테스트
```bash
# 코드 품질 검사
gemini test src/ydh/ --quality-check

# 성능 분석
gemini performance vault/90_indices/rag.py --bottleneck-analysis
```

### 3. 보안 검사
```bash
# 민감 정보 스캔
gemini security-scan . --exclude-patterns="api_key,secret,token"

# 의존성 검사
gemini dependencies --vulnerability-check
```

## 로깅 및 모니터링

### 1. 로그 파일 위치
```
logs/
├── downloader.log     # 다운로드 시스템
├── embedding.log      # 벡터 임베딩
├── rag.log           # RAG 시스템
├── tauri.log         # 데스크톱 앱
└── gemini.log        # Gemini CLI (신규)
```

### 2. 로그 분석 시나리오
```bash
# 에러 패턴 분석
gemini analyze logs/downloader.log --error-patterns

# 성능 메트릭 추출
gemini metrics logs/rag.log --performance-summary
```

## 호환성 체크리스트

### ✅ 확인된 호환성
1. **API 키 분리**: 기존 DeepSeek/OpenAI 키와 독립적
2. **설정 파일 분리**: .gemini.toml 별도 관리
3. **로그 파일 분리**: 기존 로그와 충돌 없음
4. **환경 변수 독립**: 기존 YDH_* 변수와 분리

### ⚠️ 주의사항
1. **코드 수정 제한**: 기존 AI 통합 코드 수정 금지
2. **의존성 충돌**: 새로운 패키지 설치 시 기존 환경 확인
3. **포트 충돌**: 개발 서버 포트 3000 사용 중
4. **메모리 사용**: 기존 RAG 시스템과 동시 실행 시 메모리 고려

### 🔄 정기 점검 항목
1. **API 호출 패턴**: 기존 DeepSeek 사용량 모니터링
2. **성능 영향**: Gemini 사용이 기존 시스템에 미치는 영향
3. **로그 크기**: 추가 로그 파일로 인한 디스크 사용량
4. **환경 변수**: 개발팀 간 설정 동기화

---

이 컨텍스트 파일은 Gemini CLI가 Y-Data-House 프로젝트의 기존 AI 통합을 존중하면서도 효과적인 개발 지원을 제공하기 위한 가이드라인입니다.

마지막 업데이트: 2025-01-03